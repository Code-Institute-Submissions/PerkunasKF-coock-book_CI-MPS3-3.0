{% extends "base.html" %}
{% block content %}

    <h4>Edit Recipe</h4>

    <div class="row">
        <form class="col s12" method="POST" action="{{ url_for('edit_recipe', recipe_id=recipe_select._id) }}">
            <div class="row">
                {% for recipe in recipes_list %}
                    {% if recipe.recipe_name == recipe_select.recipe_name %}
                        <div class="col s4 recipe-images">
                            <img src="{{ recipe_select.recipe_image }}" alt="">
                        </div>
                        <div class="input-field col s8">
                            <input id="recipe_name" name="recipe_name" type="text" class="validate" maxlength="50"
                            value="{{ recipe.recipe_name.capitalize()  }}" required>
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <div class="row">
                <div id="ingredient-list" class="col s12">
                    <ul id="edit_ingredients">
                        {% for recipe in recipes_list %}
                            {% if recipe.recipe_name == recipe_select.recipe_name %}
                                {% set count = namespace(value=0) %}
                                {% for ingredient in recipe.recipe_ingredients %}
                                    <li class="edit-ing-input-field" id="edit-ingredient-list-item-{{ count.value }}" number="{{ count.value }}">
                                        <div class="row">
                                            <div class="col s9"><input name="recipe_ingredient" type="text" class="recipe_ing"
                                                value="{{ ingredient }}" required=""></div>
                                            <div class="col s3 edit-item-remuve" id="edit-ingredient-list-item-remuve-{{ count.value }}" number="{{ count.value }}">
                                                <p>Remuve</p>
                                            </div>
                                        </div>
                                    </li>
                                    {% set count.value = count.value + 1 %}
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
            <div class="row">
                <div id="direction-list" class="col s12">
                    <ul id="edit-directions">
                        {% for recipe in recipes_list %}
                            {% if recipe.recipe_name == recipe_select.recipe_name %}
                                {% set count = namespace(value=0) %}
                                {% for direction in recipe.recipe_directions %}
                                    <li class="edit-dir-input-field" id="edit-directions-list-item-{{ count.value }}" number="{{ count.value }}">
                                        <div class="row">
                                            <div class="col s9">
                                                <textarea name="recipe_direction" type="text" class="recipe_dir"
                                                required="">
                                                {{- direction -}}
                                            </textarea>
                                            </div>
                                            <div class="col s3" id="edit-direction-list-item-remuve-{{ count.value }}">
                                                <p>Remuve</p>
                                            </div>
                                        </div>
                                    </li>
                                    {% set count.value = count.value + 1 %}
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
            
            <div class="row">
                <div class="col s4">
                    <p>
                        <label>
                            {% if recipe_select.meal_type == "breakfast" %}
                                <input name="meal_type" type="radio" value="breakfast" require checked/>
                                <span>Breakfast</span>
                            {% else %}
                                <input name="meal_type" type="radio" value="breakfast" require/>
                                <span>Breakfast</span>
                            {% endif %}
                        </label>
                    </p>
                </div>
                <div class="col s4">
                    <p>
                        <label>
                            {% if recipe_select.meal_type == "lunch" %}
                                <input name="meal_type" type="radio" value="lunch" checked/>
                                <span>Lunch</span>
                            {% else %}
                                <input name="meal_type" type="radio" value="lunch" />
                                <span>Lunch</span>
                            {% endif %}
                        </label>
                    </p>
                </div>
                <div class="col s4">
                    <p>
                        <label>
                            {% if recipe_select.meal_type == "dinner" %}
                                <input name="meal_type" type="radio" value="dinner" checked/>
                                <span>Dinner</span>
                            {% else %}
                                <input name="meal_type" type="radio" value="dinner" />
                                <span>Dinner</span>
                            {% endif %}
                        </label>
                    </p>
                </div>
            </div>

            <div class="row">
                <div id="upload_widget" class="cloudinary-button">Change Image</div>
            </div>
            <div class="row" style="display: none;">
                <input id="recipe_image" name="recipe_image" type="text" value="{{ recipe_select.recipe_image }}">
                <label for="recipe_image"></label>
            </div>
            <div class="row">
                <div class="col s6"><button type="submit" class="btn-large">Edit Recipy</button></div>
                <div class="col s6"><a href="{{ url_for('profile', username=session['user']) }}" class="btn-large">Cancel</a></div>
            </div>
        </form>
    </div>


{% endblock %}